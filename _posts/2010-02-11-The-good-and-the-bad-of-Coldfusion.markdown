---
layout: post
title: The good and the bad of Coldfusion
date: 2010-02-11
---

<span class="blsp-spelling-error" id="SPELLING_ERROR_0">Coldfusion</span> (the programming language) is at times very good.   It's full of one liners.<br /><br />Want to get the contents of a google search for monkeys?<br /><a href="http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_g-h_09.html"><span class="blsp-spelling-error" id="SPELLING_ERROR_1">CFHTTP</span></a> &lt;cfhttp url="http://www.google.com/search?q=monkeys"&gt;<br /><br />Want to make an FTP connection?<br /><a href="http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_f_17.html"><span class="blsp-spelling-error" id="SPELLING_ERROR_2">CFFTP</span> </a>&lt;cfftp action="open" username="anonymous" connection="My_query" password="youremail@email.com" server="ftp.website.com" stoponerror="Yes"&gt;<br /><br />Query a database?<br /><a href="http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_p-q_17.html"><span class="blsp-spelling-error" id="SPELLING_ERROR_3">CFQUERY</span> </a>&lt;cfquery name="qryName" datasource="whatever"&gt;<br />select * from table<br />&lt;/cfquery&gt;<br /><br />What to have locally scoped variables?<br /><span class="blsp-spelling-error" id="SPELLING_ERROR_4">ehhhhh</span> can't do it.  Yeah, this is the bad part.<br /><br /><span class="blsp-spelling-error" id="SPELLING_ERROR_5">Coldfusion</span> doesn't scope its variables by default.  So this means that any variable in a function is a global variable.  This was a horrible language design decision.  I'm sure they have a good reason for it, but it has been kicking us in the butt lately.<br /><br />For instance, on a website I work on, Person A is getting content they didn't request because Person B requested it after Person A.  This is happening because coldfusion isn't scoping Person A's variables correctly.  They are getting overwritten by Person B's data.  Thus Person A gets Person <span class="blsp-spelling-error" id="SPELLING_ERROR_6">Bs</span> data.<br /><br />How did we fix it?  Well, we created a structure called LOCALS and all of our local function variables are members of this structure.  See that var in front of LOCALS?  It is how you force <span class="blsp-spelling-error" id="SPELLING_ERROR_7">Coldfusion</span> to make a variable local.  Why don't we just put var in front of all the variables?  <span class="blsp-spelling-error" id="SPELLING_ERROR_8">Coldfusion</span> demands that all <span class="blsp-spelling-error" id="SPELLING_ERROR_9">var's</span> be declared at the beginning of the function.  Go figure.  The code looks like this:<br /><br /><span style="font-weight: bold;">&lt;cfset locals=" structnew()"&gt;&lt;/cfset&gt;</span><br /><span style="font-weight: bold;">&lt;cfset x=" 123"&gt;&lt;/cfset&gt;</span><br /><span style="font-weight: bold;">&lt;cfset y=" 456"&gt;&lt;/cfset&gt;</span><br /><br />Don't think for a minute I came up with this great idea.  I first saw it on <a href="http://www.bennadel.com/">Ben <span class="blsp-spelling-error" id="SPELLING_ERROR_10">Nadel's</span> blog</a>.<br /><br />It is annoying and tedious and just frustrating.  After years of C# and other programming languages, I just took scoping for granted.  It's an error that doesn't happen when one programmer tests.  You need hundreds or more users running a site to really see this error happen often.<br /><br />In other news, I'm working on a portfolio site for a local artist.  I will post site designs in the near future.</cfftp></cfhttp>
